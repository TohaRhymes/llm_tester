{
  "info": {
    "name": "LLM Test Generator API",
    "description": "Complete API collection for LLM Test Generator - generate and grade educational exams from Markdown content with multilingual support",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "2.0.0"
  },
  "item": [
    {
      "name": "Health Check",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response has status ok\", function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.status).to.eql(\"ok\");",
              "});",
              "",
              "pm.test(\"Response has version\", function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.version).to.exist;",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/health",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "health"
          ]
        },
        "description": "Check if the API is running and healthy"
      },
      "response": []
    },
    {
      "name": "Upload Markdown File",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"File uploaded successfully\", function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.message).to.include(\"successfully\");",
              "    pm.expect(jsonData.filename).to.exist;",
              "});",
              "",
              "pm.test(\"Response contains file path\", function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.path).to.exist;",
              "    pm.environment.set(\"uploaded_filename\", jsonData.filename);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "file",
              "type": "file",
              "src": "docs/examples/sample_data/sample_medical.md"
            }
          ]
        },
        "url": {
          "raw": "{{base_url}}/api/upload",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "upload"
          ]
        },
        "description": "Upload a Markdown file for exam generation"
      },
      "response": []
    },
    {
      "name": "List Uploaded Files",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response contains files array\", function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.files).to.be.an('array');",
              "    pm.expect(jsonData.count).to.be.a('number');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/files",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "files"
          ]
        },
        "description": "Get list of all uploaded Markdown files"
      },
      "response": []
    },
    {
      "name": "Get File Content",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response contains file content\", function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.content).to.exist;",
              "    pm.expect(jsonData.filename).to.exist;",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/files/{{uploaded_filename}}",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "files",
            "{{uploaded_filename}}"
          ]
        },
        "description": "Get content of a specific uploaded file"
      },
      "response": []
    },
    {
      "name": "Generate Exam - English (Count-based)",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response contains exam_id\", function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.exam_id).to.exist;",
              "    pm.environment.set(\"exam_id\", jsonData.exam_id);",
              "});",
              "",
              "pm.test(\"Response contains questions\", function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.questions).to.be.an('array');",
              "    pm.expect(jsonData.questions.length).to.equal(5);",
              "});",
              "",
              "pm.test(\"Questions have required fields including rubrics\", function () {",
              "    const jsonData = pm.response.json();",
              "    const firstQuestion = jsonData.questions[0];",
              "    pm.expect(firstQuestion.id).to.exist;",
              "    pm.expect(firstQuestion.type).to.exist;",
              "    pm.expect(firstQuestion.stem).to.exist;",
              "    pm.expect(firstQuestion.rubric).to.be.an('array');",
              "    pm.expect(firstQuestion.rubric.length).to.be.greaterThan(0);",
              "});",
              "",
              "pm.test(\"Config includes language setting\", function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.config_used).to.exist;",
              "    pm.expect(jsonData.config_used.language).to.equal('en');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"markdown_content\": \"# Gestational Hypertension and Preeclampsia\\n\\n## Definitions\\n- **Gestational Hypertension**: Blood pressure \\u2265140/90 mmHg after 20 weeks of pregnancy without proteinuria.\\n- **Preeclampsia**: Hypertension after 20 weeks combined with proteinuria **or** signs of organ damage.\\n\\n## Risk Factors\\n- First pregnancy, multiple pregnancy, obesity (BMI \\u226530), maternal age <18 or >40, family history of preeclampsia, chronic hypertension.\\n\\n## Diagnosis\\n- Blood pressure measurement at rest in two repetitions with an interval \\u22654 hours.\\n- Proteinuria: \\u2265300 mg/day **or** urine protein/creatinine ratio \\u22650.3.\\n- Assessment of organ manifestations: thrombocytopenia, elevated ALT/AST, headache, visual disturbances, pulmonary edema.\\n\\n## Management\\n- Monitoring blood pressure and symptoms, laboratory control.\\n- Antihypertensive therapy at BP \\u2265160/110.\\n- Consider delivery if maternal/fetal condition worsens or at \\u226537 weeks gestation.\",\n    \"config\": {\n        \"single_choice_count\": 2,\n        \"multiple_choice_count\": 2,\n        \"open_ended_count\": 1,\n        \"difficulty\": \"medium\",\n        \"language\": \"en\",\n        \"seed\": 42,\n        \"provider\": \"local\"\n    }\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/generate",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "generate"
          ]
        },
        "description": "Generate an English exam using count-based configuration (recommended approach). Includes rubrics for all question types."
      },
      "response": []
    },
    {
      "name": "Generate Exam - Russian (Count-based)",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response contains exam_id\", function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.exam_id).to.exist;",
              "    pm.environment.set(\"exam_id_ru\", jsonData.exam_id);",
              "});",
              "",
              "pm.test(\"Questions are in Russian (Cyrillic)\", function () {",
              "    const jsonData = pm.response.json();",
              "    const firstQuestion = jsonData.questions[0];",
              "    // Check if stem contains Cyrillic characters",
              "    const hasCyrillic = /[\\u0400-\\u04FF]/.test(firstQuestion.stem);",
              "    pm.expect(hasCyrillic).to.be.true;",
              "});",
              "",
              "pm.test(\"All questions have rubrics\", function () {",
              "    const jsonData = pm.response.json();",
              "    jsonData.questions.forEach(q => {",
              "        pm.expect(q.rubric).to.be.an('array');",
              "        pm.expect(q.rubric.length).to.be.greaterThan(0);",
              "    });",
              "});",
              "",
              "pm.test(\"Config language is Russian\", function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.config_used.language).to.equal('ru');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"markdown_content\": \"# \\u0413\\u0435\\u0441\\u0442\\u0430\\u0446\\u0438\\u043e\\u043d\\u043d\\u0430\\u044f \\u0433\\u0438\\u043f\\u0435\\u0440\\u0442\\u0435\\u043d\\u0437\\u0438\\u044f \\u0438 \\u043f\\u0440\\u0435\\u044d\\u043a\\u043b\\u0430\\u043c\\u043f\\u0441\\u0438\\u044f\\n\\n## \\u041e\\u043f\\u0440\\u0435\\u0434\\u0435\\u043b\\u0435\\u043d\\u0438\\u044f\\n- **\\u0413\\u0435\\u0441\\u0442\\u0430\\u0446\\u0438\\u043e\\u043d\\u043d\\u0430\\u044f \\u0433\\u0438\\u043f\\u0435\\u0440\\u0442\\u0435\\u043d\\u0437\\u0438\\u044f**: \\u0430\\u0440\\u0442\\u0435\\u0440\\u0438\\u0430\\u043b\\u044c\\u043d\\u043e\\u0435 \\u0434\\u0430\\u0432\\u043b\\u0435\\u043d\\u0438\\u0435 \\u2265140/90 \\u043c\\u043c \\u0440\\u0442. \\u0441\\u0442. \\u043f\\u043e\\u0441\\u043b\\u0435 20-\\u0439 \\u043d\\u0435\\u0434\\u0435\\u043b\\u0438 \\u0431\\u0435\\u0440\\u0435\\u043c\\u0435\\u043d\\u043d\\u043e\\u0441\\u0442\\u0438 \\u0431\\u0435\\u0437 \\u043f\\u0440\\u0438\\u0437\\u043d\\u0430\\u043a\\u043e\\u0432 \\u043f\\u0440\\u043e\\u0442\\u0435\\u0438\\u043d\\u0443\\u0440\\u0438\\u0438.\\n- **\\u041f\\u0440\\u0435\\u044d\\u043a\\u043b\\u0430\\u043c\\u043f\\u0441\\u0438\\u044f**: \\u0433\\u0438\\u043f\\u0435\\u0440\\u0442\\u0435\\u043d\\u0437\\u0438\\u044f \\u043f\\u043e\\u0441\\u043b\\u0435 20-\\u0439 \\u043d\\u0435\\u0434\\u0435\\u043b\\u0438 \\u0432 \\u0441\\u043e\\u0447\\u0435\\u0442\\u0430\\u043d\\u0438\\u0438 \\u0441 \\u043f\\u0440\\u043e\\u0442\\u0435\\u0438\\u043d\\u0443\\u0440\\u0438\\u0435\\u0439 **\\u0438\\u043b\\u0438** \\u043f\\u0440\\u0438\\u0437\\u043d\\u0430\\u043a\\u0430\\u043c\\u0438 \\u043f\\u043e\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u044f \\u043e\\u0440\\u0433\\u0430\\u043d\\u043e\\u0432-\\u043c\\u0438\\u0448\\u0435\\u043d\\u0435\\u0439.\\n\\n## \\u0424\\u0430\\u043a\\u0442\\u043e\\u0440\\u044b \\u0440\\u0438\\u0441\\u043a\\u0430\\n- \\u041f\\u0435\\u0440\\u0432\\u0430\\u044f \\u0431\\u0435\\u0440\\u0435\\u043c\\u0435\\u043d\\u043d\\u043e\\u0441\\u0442\\u044c, \\u043c\\u043d\\u043e\\u0433\\u043e\\u043f\\u043b\\u043e\\u0434\\u0438\\u0435, \\u043e\\u0436\\u0438\\u0440\\u0435\\u043d\\u0438\\u0435 (\\u0418\\u041c\\u0422 \\u226530), \\u0432\\u043e\\u0437\\u0440\\u0430\\u0441\\u0442 \\u043c\\u0430\\u0442\\u0435\\u0440\\u0438 <18 \\u0438\\u043b\\u0438 >40, \\u0441\\u0435\\u043c\\u0435\\u0439\\u043d\\u044b\\u0439 \\u0430\\u043d\\u0430\\u043c\\u043d\\u0435\\u0437 \\u043f\\u0440\\u0435\\u044d\\u043a\\u043b\\u0430\\u043c\\u043f\\u0441\\u0438\\u0438, \\u0445\\u0440\\u043e\\u043d\\u0438\\u0447\\u0435\\u0441\\u043a\\u0430\\u044f \\u0433\\u0438\\u043f\\u0435\\u0440\\u0442\\u0435\\u043d\\u0437\\u0438\\u044f.\\n\\n## \\u0414\\u0438\\u0430\\u0433\\u043d\\u043e\\u0441\\u0442\\u0438\\u043a\\u0430\\n- \\u0418\\u0437\\u043c\\u0435\\u0440\\u0435\\u043d\\u0438\\u0435 \\u0410\\u0414 \\u0432 \\u043f\\u043e\\u043a\\u043e\\u0435 \\u0432 \\u0434\\u0432\\u0443\\u0445 \\u043f\\u043e\\u0432\\u0442\\u043e\\u0440\\u0435\\u043d\\u0438\\u044f\\u0445 \\u0441 \\u0438\\u043d\\u0442\\u0435\\u0440\\u0432\\u0430\\u043b\\u043e\\u043c \\u22654 \\u0447\\u0430\\u0441\\u0430.\\n- \\u041f\\u0440\\u043e\\u0442\\u0435\\u0438\\u043d\\u0443\\u0440\\u0438\\u044f: \\u2265300 \\u043c\\u0433/\\u0441\\u0443\\u0442 **\\u0438\\u043b\\u0438** \\u043e\\u0442\\u043d\\u043e\\u0448\\u0435\\u043d\\u0438\\u0435 \\u0431\\u0435\\u043b\\u043e\\u043a/\\u043a\\u0440\\u0435\\u0430\\u0442\\u0438\\u043d\\u0438\\u043d \\u043c\\u043e\\u0447\\u0438 \\u22650.3.\\n- \\u041e\\u0446\\u0435\\u043d\\u043a\\u0430 \\u043e\\u0440\\u0433\\u0430\\u043d\\u043d\\u044b\\u0445 \\u043f\\u0440\\u043e\\u044f\\u0432\\u043b\\u0435\\u043d\\u0438\\u0439: \\u0442\\u0440\\u043e\\u043c\\u0431\\u043e\\u0446\\u0438\\u0442\\u043e\\u043f\\u0435\\u043d\\u0438\\u044f, \\u043f\\u043e\\u0432\\u044b\\u0448\\u0435\\u043d\\u0438\\u0435 \\u0410\\u041b\\u0422/\\u0410\\u0421\\u0422, \\u0433\\u043e\\u043b\\u043e\\u0432\\u043d\\u0430\\u044f \\u0431\\u043e\\u043b\\u044c, \\u043d\\u0430\\u0440\\u0443\\u0448\\u0435\\u043d\\u0438\\u044f \\u0437\\u0440\\u0435\\u043d\\u0438\\u044f, \\u043e\\u0442\\u0451\\u043a \\u043b\\u0451\\u0433\\u043a\\u0438\\u0445.\\n\\n## \\u0422\\u0430\\u043a\\u0442\\u0438\\u043a\\u0430 \\u0432\\u0435\\u0434\\u0435\\u043d\\u0438\\u044f\\n- \\u041c\\u043e\\u043d\\u0438\\u0442\\u043e\\u0440\\u0438\\u043d\\u0433 \\u0410\\u0414 \\u0438 \\u0441\\u0438\\u043c\\u043f\\u0442\\u043e\\u043c\\u043e\\u0432, \\u043b\\u0430\\u0431\\u043e\\u0440\\u0430\\u0442\\u043e\\u0440\\u043d\\u044b\\u0439 \\u043a\\u043e\\u043d\\u0442\\u0440\\u043e\\u043b\\u044c.\\n- \\u0410\\u043d\\u0442\\u0438\\u0433\\u0438\\u043f\\u0435\\u0440\\u0442\\u0435\\u043d\\u0437\\u0438\\u0432\\u043d\\u0430\\u044f \\u0442\\u0435\\u0440\\u0430\\u043f\\u0438\\u044f \\u043f\\u0440\\u0438 \\u0410\\u0414 \\u2265160/110.\\n- \\u0420\\u0430\\u0441\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u043d\\u0438\\u0435 \\u0440\\u043e\\u0434\\u043e\\u0440\\u0430\\u0437\\u0440\\u0435\\u0448\\u0435\\u043d\\u0438\\u044f \\u043f\\u0440\\u0438 \\u0443\\u0445\\u0443\\u0434\\u0448\\u0435\\u043d\\u0438\\u0438 \\u0441\\u043e\\u0441\\u0442\\u043e\\u044f\\u043d\\u0438\\u044f \\u043c\\u0430\\u0442\\u0435\\u0440\\u0438/\\u043f\\u043b\\u043e\\u0434\\u0430 \\u0438\\u043b\\u0438 \\u043f\\u0440\\u0438 \\u0441\\u0440\\u043e\\u043a\\u0435 \\u226537 \\u043d\\u0435\\u0434\\u0435\\u043b\\u044c.\",\n    \"config\": {\n        \"single_choice_count\": 2,\n        \"multiple_choice_count\": 1,\n        \"open_ended_count\": 2,\n        \"difficulty\": \"medium\",\n        \"language\": \"ru\",\n        \"seed\": 123,\n        \"provider\": \"local\"\n    }\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/generate",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "generate"
          ]
        },
        "description": "Generate a Russian exam with questions in Cyrillic. Even if source content is in English, questions will be generated in Russian."
      },
      "response": []
    },
    {
      "name": "Generate Exam - Legacy Ratio-based",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response contains correct number of questions\", function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.questions.length).to.equal(10);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"markdown_content\": \"# Medical Topic\\n\\nSome educational content here for generating questions.\\n\\n## Subtopic\\nMore detailed information.\",\n    \"config\": {\n        \"total_questions\": 10,\n        \"single_choice_ratio\": 0.5,\n        \"multiple_choice_ratio\": 0.3,\n        \"open_ended_ratio\": 0.2,\n        \"difficulty\": \"mixed\",\n        \"language\": \"en\",\n        \"provider\": \"local\"\n    }\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/generate",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "generate"
          ]
        },
        "description": "Generate exam using legacy ratio-based configuration (backward compatible). Ratios must sum to 1.0."
      },
      "response": []
    },
    {
      "name": "List Exams",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response contains exams array\", function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.exams).to.be.an('array');",
              "    pm.expect(jsonData.count).to.be.a('number');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/exams",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "exams"
          ]
        },
        "description": "Get list of all generated exams"
      },
      "response": []
    },
    {
      "name": "Get Exam by ID",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response is valid exam\", function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.exam_id).to.exist;",
              "    pm.expect(jsonData.questions).to.be.an('array');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/exams/{{exam_id}}",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "exams",
            "{{exam_id}}"
          ]
        },
        "description": "Get a specific exam by its ID"
      },
      "response": []
    },
    {
      "name": "Grade Exam - Choice Questions Only",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "exec": [
              "// This script prepares sample answers for choice questions",
              "console.log(\"Preparing sample answers for grading (choice questions)\");"
            ],
            "type": "text/javascript"
          }
        },
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response contains grading summary\", function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.summary).to.exist;",
              "    pm.expect(jsonData.summary.total).to.be.a('number');",
              "    pm.expect(jsonData.summary.correct).to.be.a('number');",
              "    pm.expect(jsonData.summary.score_percent).to.be.a('number');",
              "});",
              "",
              "pm.test(\"Response contains per-question results\", function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.per_question).to.be.an('array');",
              "    pm.expect(jsonData.per_question.length).to.be.greaterThan(0);",
              "});",
              "",
              "pm.test(\"Per-question results have required fields\", function () {",
              "    const jsonData = pm.response.json();",
              "    const firstResult = jsonData.per_question[0];",
              "    pm.expect(firstResult.question_id).to.exist;",
              "    pm.expect(firstResult.is_correct).to.be.a('boolean');",
              "    pm.expect(firstResult.partial_credit).to.be.a('number');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"exam_id\": \"{{exam_id}}\",\n  \"answers\": [\n    {\n      \"question_id\": \"q-001\",\n      \"choice\": [0]\n    },\n    {\n      \"question_id\": \"q-002\",\n      \"choice\": [1]\n    },\n    {\n      \"question_id\": \"q-003\",\n      \"choice\": [2]\n    },\n    {\n      \"question_id\": \"q-004\",\n      \"choice\": [0, 2]\n    }\n  ]\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/grade",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "grade"
          ]
        },
        "description": "Grade student answers for choice questions (single and multiple choice). Supports partial credit for multiple choice questions."
      },
      "response": []
    },
    {
      "name": "Grade Exam - With Open-ended Questions",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Open-ended questions have AI feedback\", function () {",
              "    const jsonData = pm.response.json();",
              "    const openEndedResults = jsonData.per_question.filter(q => q.feedback);",
              "    pm.expect(openEndedResults.length).to.be.greaterThan(0);",
              "    openEndedResults.forEach(result => {",
              "        pm.expect(result.feedback).to.be.a('string');",
              "        pm.expect(result.feedback.length).to.be.greaterThan(0);",
              "    });",
              "});",
              "",
              "pm.test(\"Partial credit scores are valid\", function () {",
              "    const jsonData = pm.response.json();",
              "    jsonData.per_question.forEach(result => {",
              "        pm.expect(result.partial_credit).to.be.at.least(0);",
              "        pm.expect(result.partial_credit).to.be.at.most(1);",
              "    });",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"exam_id\": \"{{exam_id}}\",\n  \"answers\": [\n    {\n      \"question_id\": \"q-001\",\n      \"choice\": [0]\n    },\n    {\n      \"question_id\": \"q-002\",\n      \"choice\": [1]\n    },\n    {\n      \"question_id\": \"q-003\",\n      \"choice\": [2]\n    },\n    {\n      \"question_id\": \"q-004\",\n      \"choice\": [0, 2]\n    },\n    {\n      \"question_id\": \"q-005\",\n      \"text_answer\": \"Gestational hypertension is defined as blood pressure of 140/90 mmHg or higher after 20 weeks of pregnancy. Management includes monitoring blood pressure regularly and using antihypertensive medications when blood pressure reaches 160/110 or higher. The condition typically resolves within 12 weeks after delivery.\"\n    }\n  ]\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/grade",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "grade"
          ]
        },
        "description": "Grade exam including open-ended questions. AI evaluates text answers against rubric criteria and provides detailed feedback."
      },
      "response": []
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "exam_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "exam_id_ru",
      "value": "",
      "type": "string"
    },
    {
      "key": "uploaded_filename",
      "value": "",
      "type": "string"
    }
  ]
}
