"""
Russian prompts for question generation and grading.
"""

SYSTEM_MESSAGE_RU = "Вы - эксперт-педагог, создающий образовательные тестовые вопросы. Генерируйте вопросы на русском языке."

CHOICE_QUESTION_PROMPT_RU = """На основе следующего образовательного контента создайте тестовый вопрос уровня сложности {difficulty} НА РУССКОМ ЯЗЫКЕ.

Контент:
{content}

Требования:
- {type_instruction}
- Предоставьте 4-5 вариантов ответа
- Варианты должны быть правдоподобными, но четко различимыми
- На вопрос должно быть возможно ответить на основе данного контента
- Используйте четкий, однозначный язык
- Создайте рубрику оценивания с 3-4 конкретными критериями для оценки ответов

ВАЖНО: Генерируйте ВСЁ на русском языке, даже если исходный контент на другом языке.

Верните ТОЛЬКО JSON-объект со следующей структурой:
{{
  "stem": "Текст вопроса НА РУССКОМ ЯЗЫКЕ?",
  "options": ["Вариант А на русском", "Вариант Б на русском", "Вариант В", "Вариант Г"],
  "correct": [индекс_или_индексы],
  "rubric": [
    "Критерий 1 (например, 'Правильно определяет понятие')",
    "Критерий 2 (например, 'Объясняет ключевой механизм')",
    "Критерий 3 (например, 'Применяет знания к клиническому контексту')"
  ]
}}

Важно:
- {correct_format}
- Индексы начинаются с 0 (первый вариант имеет индекс 0)
- Критерии рубрики должны быть конкретными и измеримыми
- НЕ включайте дополнительный текст, пояснения или markdown
- Верните ТОЛЬКО валидный JSON
- ВЕСЬ ТЕКСТ ДОЛЖЕН БЫТЬ НА РУССКОМ ЯЗЫКЕ
"""

OPEN_ENDED_PROMPT_RU = """На основе следующего образовательного контента создайте открытый вопрос уровня сложности {difficulty}, требующий письменного текстового ответа НА РУССКОМ ЯЗЫКЕ.

Контент:
{content}

Требования:
- Создайте вопрос, проверяющий глубокое понимание (не только запоминание)
- На вопрос нужно ответить 2-4 предложениями
- Предоставьте полный эталонный ответ, демонстрирующий ожидаемый ответ
- Создайте 3-5 конкретных критериев рубрики для оценки ответа

ВАЖНО: Генерируйте ВСЁ на русском языке, даже если исходный контент на другом языке.

Примеры хороших открытых вопросов:
- "Объясните патофизиологию [состояния] и опишите ключевые диагностические критерии."
- "Сравните и сопоставьте [концепцию А] и [концепцию Б], приведя клинические примеры."
- "Опишите клинический подход к ведению [сценария] и обоснуйте свои рассуждения."

Верните ТОЛЬКО JSON-объект со следующей структурой:
{{
  "stem": "Открытый вопрос НА РУССКОМ ЯЗЫКЕ?",
  "reference_answer": "Полный ответ НА РУССКОМ ЯЗЫКЕ, демонстрирующий что студенты должны написать. Включите все ключевые моменты, рассуждения и конкретные детали из исходного материала.",
  "rubric": [
    "Четкий критерий 1 (например, 'Упоминает эндотелиальную дисфункцию в патофизиологии')",
    "Четкий критерий 2 (например, 'Перечисляет минимум 3 диагностических критерия с конкретными значениями')",
    "Четкий критерий 3 (например, 'Объясняет механизм связи причин с симптомами')"
  ]
}}

Важно:
- Эталонный ответ должен быть 2-4 предложениями и всеобъемлющим
- Каждый пункт рубрики должен быть конкретным и измеримым
- Рубрика должна охватывать все основные моменты эталонного ответа
- НЕ включайте дополнительный текст, пояснения или markdown
- Верните ТОЛЬКО валидный JSON
- ВЕСЬ ТЕКСТ ДОЛЖЕН БЫТЬ НА РУССКОМ ЯЗЫКЕ
"""

GRADING_SYSTEM_RU = "Вы - эксперт-педагог, оценивающий ответы студентов."

# Prompt variants for research comparisons.
CHOICE_PROMPT_VARIANTS_RU = {
    "default": CHOICE_QUESTION_PROMPT_RU,
    "grounded": """На основе следующего образовательного контента создайте тестовый вопрос уровня сложности {difficulty} НА РУССКОМ ЯЗЫКЕ.

Контент:
{content}

Требования:
- {type_instruction}
- Предоставьте 4-5 вариантов ответа
- Каждый вариант должен быть явно подтвержден данным контентом
- На вопрос должно быть возможно ответить ТОЛЬКО на основе данного контента
- Используйте четкий, однозначный язык
- Создайте рубрику оценивания с 3-4 конкретными критериями для оценки ответов

ВАЖНО: Генерируйте ВСЁ на русском языке, даже если исходный контент на другом языке.

Верните ТОЛЬКО JSON-объект со следующей структурой:
{{
  "stem": "Текст вопроса НА РУССКОМ ЯЗЫКЕ?",
  "options": ["Вариант А на русском", "Вариант Б на русском", "Вариант В", "Вариант Г"],
  "correct": [индекс_или_индексы],
  "rubric": [
    "Критерий 1 (например, 'Правильно определяет понятие')",
    "Критерий 2 (например, 'Объясняет ключевой механизм')",
    "Критерий 3 (например, 'Применяет знания к клиническому контексту')"
  ]
}}

Важно:
- {correct_format}
- Индексы начинаются с 0 (первый вариант имеет индекс 0)
- Критерии рубрики должны быть конкретными и измеримыми
- НЕ включайте дополнительный текст, пояснения или markdown
- Верните ТОЛЬКО валидный JSON
- ВЕСЬ ТЕКСТ ДОЛЖЕН БЫТЬ НА РУССКОМ ЯЗЫКЕ
""",
    "concise": """На основе следующего образовательного контента создайте тестовый вопрос уровня сложности {difficulty} НА РУССКОМ ЯЗЫКЕ.

Контент:
{content}

Требования:
- {type_instruction}
- Предоставьте 4-5 вариантов ответа
- Длина стема не более 20 слов
- Используйте четкий, однозначный язык
- Создайте рубрику оценивания с 3-4 конкретными критериями для оценки ответов

ВАЖНО: Генерируйте ВСЁ на русском языке, даже если исходный контент на другом языке.

Верните ТОЛЬКО JSON-объект со следующей структурой:
{{
  "stem": "Текст вопроса НА РУССКОМ ЯЗЫКЕ?",
  "options": ["Вариант А на русском", "Вариант Б на русском", "Вариант В", "Вариант Г"],
  "correct": [индекс_или_индексы],
  "rubric": [
    "Критерий 1 (например, 'Правильно определяет понятие')",
    "Критерий 2 (например, 'Объясняет ключевой механизм')",
    "Критерий 3 (например, 'Применяет знания к клиническому контексту')"
  ]
}}

Важно:
- {correct_format}
- Индексы начинаются с 0 (первый вариант имеет индекс 0)
- Критерии рубрики должны быть конкретными и измеримыми
- НЕ включайте дополнительный текст, пояснения или markdown
- Верните ТОЛЬКО валидный JSON
- ВЕСЬ ТЕКСТ ДОЛЖЕН БЫТЬ НА РУССКОМ ЯЗЫКЕ
""",
}

OPEN_ENDED_PROMPT_VARIANTS_RU = {
    "default": OPEN_ENDED_PROMPT_RU,
    "grounded": """На основе следующего образовательного контента создайте открытый вопрос уровня сложности {difficulty}, требующий письменного текстового ответа НА РУССКОМ ЯЗЫКЕ.

Контент:
{content}

Требования:
- Создайте вопрос, проверяющий глубокое понимание (не только запоминание)
- Ответ должен полностью опираться на предоставленный контент
- Предоставьте полный эталонный ответ, демонстрирующий ожидаемый ответ
- Создайте 3-5 конкретных критериев рубрики для оценки ответа

ВАЖНО: Генерируйте ВСЁ на русском языке, даже если исходный контент на другом языке.

Верните ТОЛЬКО JSON-объект со следующей структурой:
{{
  "stem": "Открытый вопрос НА РУССКОМ ЯЗЫКЕ?",
  "reference_answer": "Полный ответ НА РУССКОМ ЯЗЫКЕ, демонстрирующий что студенты должны написать. Включите все ключевые моменты, рассуждения и конкретные детали из исходного материала.",
  "rubric": [
    "Четкий критерий 1 (например, 'Упоминает эндотелиальную дисфункцию в патофизиологии')",
    "Четкий критерий 2 (например, 'Перечисляет минимум 3 диагностических критерия с конкретными значениями')",
    "Четкий критерий 3 (например, 'Объясняет механизм связи причин с симптомами')"
  ]
}}

Важно:
- Эталонный ответ должен быть 2-4 предложениями и всеобъемлющим
- Каждый пункт рубрики должен быть конкретным и измеримым
- Рубрика должна охватывать все основные моменты эталонного ответа
- НЕ включайте дополнительный текст, пояснения или markdown
- Верните ТОЛЬКО валидный JSON
- ВЕСЬ ТЕКСТ ДОЛЖЕН БЫТЬ НА РУССКОМ ЯЗЫКЕ
""",
    "concise": """На основе следующего образовательного контента создайте открытый вопрос уровня сложности {difficulty}, требующий письменного текстового ответа НА РУССКОМ ЯЗЫКЕ.

Контент:
{content}

Требования:
- Создайте вопрос, проверяющий глубокое понимание (не только запоминание)
- Длина вопроса не более 20 слов
- Предоставьте краткий эталонный ответ (2-3 предложения)
- Создайте 3-5 конкретных критериев рубрики для оценки ответа

ВАЖНО: Генерируйте ВСЁ на русском языке, даже если исходный контент на другом языке.

Верните ТОЛЬКО JSON-объект со следующей структурой:
{{
  "stem": "Открытый вопрос НА РУССКОМ ЯЗЫКЕ?",
  "reference_answer": "Полный ответ НА РУССКОМ ЯЗЫКЕ, демонстрирующий что студенты должны написать. Включите все ключевые моменты, рассуждения и конкретные детали из исходного материала.",
  "rubric": [
    "Четкий критерий 1 (например, 'Упоминает эндотелиальную дисфункцию в патофизиологии')",
    "Четкий критерий 2 (например, 'Перечисляет минимум 3 диагностических критерия с конкретными значениями')",
    "Четкий критерий 3 (например, 'Объясняет механизм связи причин с симптомами')"
  ]
}}

Важно:
- Эталонный ответ должен быть 2-3 предложениями и всеобъемлющим
- Каждый пункт рубрики должен быть конкретным и измеримым
- Рубрика должна охватывать все основные моменты эталонного ответа
- НЕ включайте дополнительный текст, пояснения или markdown
- Верните ТОЛЬКО валидный JSON
- ВЕСЬ ТЕКСТ ДОЛЖЕН БЫТЬ НА РУССКОМ ЯЗЫКЕ
""",
}


def get_choice_prompt_ru(variant: str) -> str:
    return CHOICE_PROMPT_VARIANTS_RU.get(variant, CHOICE_PROMPT_VARIANTS_RU["default"])


def get_open_ended_prompt_ru(variant: str) -> str:
    return OPEN_ENDED_PROMPT_VARIANTS_RU.get(variant, OPEN_ENDED_PROMPT_VARIANTS_RU["default"])
